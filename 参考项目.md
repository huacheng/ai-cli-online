# 参考项目

本目录包含两个参考项目，用于学习和借鉴其实现方式。

---

## 1. claude-code-router

**项目地址**: `ref-projects/claude-code-router`

### 简介

Claude Code Router 是一个强大的工具，用于将 Claude Code 请求路由到不同的模型和提供商，并支持自定义请求处理。

### 核心功能

| 功能 | 描述 |
|------|------|
| **模型路由** | 根据需求将请求路由到不同模型（后台任务、思考模式、长上下文等） |
| **多提供商支持** | 支持 OpenRouter、DeepSeek、Ollama、Gemini、火山引擎、SiliconFlow 等 |
| **请求/响应转换** | 使用 Transformer 系统适配不同提供商的 API 差异 |
| **动态模型切换** | 在 Claude Code 中使用 `/model` 命令动态切换模型 |
| **CLI 模型管理** | 通过 `ccr model` 命令在终端管理模型和提供商 |
| **GitHub Actions 集成** | 在 CI/CD 工作流中触发 Claude Code 任务 |
| **插件系统** | 通过自定义 Transformer 扩展功能 |
| **预设管理** | 保存、分享和重用配置 |
| **Web UI** | 提供可视化配置界面 |

### 架构设计

- **Monorepo 架构**：cli、server、shared、ui 四个包
- **路由系统**：支持默认路由、项目级路由、自定义路由、场景路由
- **Transformer 系统**：处理不同提供商 API 的请求/响应转换
- **Agent 系统**：可插拔的功能模块（如 imageAgent）
- **SSE 流处理**：自定义 Transform streams 处理 Server-Sent Events

### 主要命令

```bash
ccr start       # 启动服务
ccr code        # 执行 claude 命令
ccr model       # 交互式模型选择
ccr preset      # 管理预设配置
ccr ui          # 打开 Web UI
ccr activate    # 输出环境变量（用于集成）
```

---

## 2. openclaw

**项目地址**: `ref-projects/openclaw`

### 简介

OpenClaw 是一个运行在本地设备上的个人 AI 助手，可以通过多种消息渠道（WhatsApp、Telegram、Slack、Discord、Signal、iMessage 等）与用户交互。

### 核心功能

| 功能 | 描述 |
|------|------|
| **本地优先网关** | 单一控制平面管理会话、渠道、工具和事件 |
| **多渠道收件箱** | WhatsApp、Telegram、Slack、Discord、Google Chat、Signal、iMessage、Microsoft Teams、Matrix、Zalo、WebChat 等 |
| **多代理路由** | 将入站渠道/账户/对等方路由到隔离的代理（工作区 + 每代理会话） |
| **语音唤醒 + 对话模式** | macOS/iOS/Android 上的常开语音功能（支持 ElevenLabs） |
| **实时画布** | 代理驱动的可视化工作区，支持 A2UI |
| **浏览器控制** | 专用 Chrome/Chromium 控制，支持快照、操作、上传 |
| **技能平台** | 内置、托管和工作区技能，支持安装门控 |
| **伴侣应用** | macOS 菜单栏应用 + iOS/Android 节点 |

### 架构设计

```
WhatsApp / Telegram / Slack / Discord / Signal / iMessage / ...
               │
               ▼
┌───────────────────────────────┐
│            Gateway            │
│       (control plane)         │
│     ws://127.0.0.1:18789      │
└──────────────┬────────────────┘
               │
               ├─ Pi agent (RPC)
               ├─ CLI (openclaw …)
               ├─ WebChat UI
               ├─ macOS app
               └─ iOS / Android nodes
```

### 关键子系统

- **Gateway WebSocket 网络**：客户端、工具和事件的单一 WS 控制平面
- **Tailscale 暴露**：Gateway 仪表板 + WS 的 Serve/Funnel 支持
- **浏览器控制**：托管的 Chrome/Chromium + CDP 控制
- **Canvas + A2UI**：代理驱动的可视化工作区
- **Voice Wake + Talk Mode**：常开语音和持续对话
- **Nodes**：画布、相机快照/剪辑、屏幕录制、位置获取、通知

### 主要命令

```bash
openclaw onboard            # 引导式设置
openclaw gateway            # 启动网关
openclaw message send       # 发送消息
openclaw agent              # 与助手对话
openclaw doctor             # 诊断问题
openclaw channels status    # 查看渠道状态
```

### 支持的消息渠道

| 核心渠道 | 扩展渠道 |
|----------|----------|
| WhatsApp (Baileys) | Microsoft Teams |
| Telegram (grammY) | Matrix |
| Slack (Bolt) | Zalo |
| Discord (discord.js) | Zalo Personal |
| Google Chat | WebChat |
| Signal (signal-cli) | - |
| BlueBubbles (iMessage) | - |
| iMessage (legacy) | - |

---

## 参考价值

| 方面 | claude-code-router | openclaw |
|------|-------------------|----------|
| **路由设计** | 多模型路由、场景路由 | 多渠道路由、代理路由 |
| **插件/扩展** | Transformer 插件系统 | 技能平台、扩展渠道 |
| **配置管理** | JSON 配置 + Web UI | 配置向导 + CLI |
| **流处理** | SSE 流转换 | WebSocket 控制平面 |
| **CLI 设计** | 子命令 + 交互式选择 | 子命令 + 引导式设置 |
